<header id="header" class="clearfix">
  @if (app.isMobile()) {
    <nz-icon
      class="nav-phone-icon"
      nzType="unordered-list"
      nzPopoverOverlayClassName="popover-menu"
      nzPopoverPlacement="bottomLeft"
      nz-popover
      [nzPopoverContent]="menu"
    />
  }

  <div nz-row style="flex-flow: nowrap">
    <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="6" [nzLg]="6" [nzXl]="5" [nzXXl]="4">
      <a href="/" id="logo">
        <img width="32" height="28.27" alt="logo" src="./assets/img/logo.svg" />
        <strong>NG-ZORRO</strong>
      </a>
    </div>
    <div nz-col [nzXs]="0" [nzSm]="0" [nzMd]="18" [nzLg]="18" [nzXl]="19" [nzXXl]="20" class="menu-row">
      <div app-searchbar (focusChange)="onFocusChange($event)"></div>
      @if (!app.isMobile()) {
        <ng-container [ngTemplateOutlet]="menu"></ng-container>
      }
    </div>
  </div>
</header>

<ng-template #menu>
  @if (!searching() || !app.responsive()) {
    <ul
      nz-menu
      app-navigation
      class="menu-site"
      [nzMode]="app.isMobile() ? 'inline' : 'horizontal'"
      [nzSelectable]="false"
      (languageChange)="toggleLanguage()"
    ></ul>

    @if (app.responsive() !== 'crowded') {
      <nz-select
        nzSize="small"
        style="max-width: 126px"
        [ngModel]="currentVersion"
        (ngModelChange)="navigateToVersion($event)"
      >
        <nz-option [nzLabel]="currentVersion" [nzValue]="currentVersion" />
        @for (version of oldVersionList; track version) {
          <nz-option [nzLabel]="version" [nzValue]="version" />
        }
      </nz-select>
      <button
        nz-button
        nzSize="small"
        (click)="toggleLanguage()"
      >
        {{ language() === 'zh' ? 'English' : '中文' }}
      </button>
      <button
        nz-button
        nzSize="small"
        (click)="toggleDirection()"
      >
        {{ dir() === 'rtl' ? 'LTR' : 'RTL' }}
      </button>
      <app-github-btn />
    }
  }
</ng-template>
